

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>facilities &mdash; Public Infrastructure Service Access 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=8d563738"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="population" href="../population/index.html" />
    <link rel="prev" title="constants" href="../constants/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Public Infrastructure Service Access
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../examples/pisa_showcase_osm.html">Pisa Showcase, Example Notebook</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../utils/index.html">utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../constants/index.html">constants</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">facilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#attributes">Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-contents">Module Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#facilities.logger"><code class="docutils literal notranslate"><span class="pre">logger</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#facilities.Facilities"><code class="docutils literal notranslate"><span class="pre">Facilities</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../population/index.html">population</a></li>
<li class="toctree-l2"><a class="reference internal" href="../isopolygons/index.html">isopolygons</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualisation/index.html">visualisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../osm_road_network/index.html">osm_road_network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../administrative_area/index.html">administrative_area</a></li>
<li class="toctree-l2"><a class="reference internal" href="../population_served_by_isopolygons/index.html">population_served_by_isopolygons</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Public Infrastructure Service Access</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">API Reference</a></li>
      <li class="breadcrumb-item active">facilities</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/autoapi/facilities/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-facilities">
<span id="facilities"></span><h1>facilities<a class="headerlink" href="#module-facilities" title="Link to this heading"></a></h1>
<p>Facility data retrieval and management module for accessibility analysis.</p>
<p>This module provides functionality for retrieving, managing, and analyzing facility location data
within specified administrative areas. It supports extracting facility data from OpenStreetMap (OSM),
generating potential facility locations through grid sampling, and preparing data for accessibility
and optimization analyses.</p>
<p class="rubric">Examples</p>
<p>Retrieve existing facilities and generate potential facility locations:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pisa.administrative_area</span><span class="w"> </span><span class="kn">import</span> <span class="n">AdministrativeArea</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pisa.facilities</span><span class="w"> </span><span class="kn">import</span> <span class="n">Facilities</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Get administrative area boundaries</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">admin_area</span> <span class="o">=</span> <span class="n">AdministrativeArea</span><span class="p">(</span><span class="s2">&quot;Timor-Leste&quot;</span><span class="p">,</span> <span class="n">admin_level</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">boundaries</span> <span class="o">=</span> <span class="n">admin_area</span><span class="o">.</span><span class="n">get_admin_area_boundaries</span><span class="p">(</span><span class="s2">&quot;Baucau&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create a facilities object</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">facilities</span> <span class="o">=</span> <span class="n">Facilities</span><span class="p">(</span><span class="n">admin_area_boundaries</span><span class="o">=</span><span class="n">boundaries</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Get existing facilities from OpenStreetMap</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">existing</span> <span class="o">=</span> <span class="n">facilities</span><span class="o">.</span><span class="n">get_existing_facilities</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">existing</span><span class="p">)</span><span class="si">}</span><span class="s2"> existing facilities&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Generate potential facility locations (grid points)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">potential</span> <span class="o">=</span> <span class="n">facilities</span><span class="o">.</span><span class="n">estimate_potential_facilities</span><span class="p">(</span><span class="n">spacing</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generated </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">potential</span><span class="p">)</span><span class="si">}</span><span class="s2"> potential facility locations&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="../administrative_area/index.html#module-administrative_area" title="administrative_area"><code class="xref py py-obj docutils literal notranslate"><span class="pre">administrative_area</span></code></a></dt><dd><p>Module for retrieving administrative area boundaries</p>
</dd>
<dt><a class="reference internal" href="../population/index.html#module-population" title="population"><code class="xref py py-obj docutils literal notranslate"><span class="pre">population</span></code></a></dt><dd><p>Module for population data processing</p>
</dd>
<dt><a class="reference internal" href="../isopolygons/index.html#module-isopolygons" title="isopolygons"><code class="xref py py-obj docutils literal notranslate"><span class="pre">isopolygons</span></code></a></dt><dd><p>Module for calculating service areas around facilities</p>
</dd>
</dl>
</div>
<section id="attributes">
<h2>Attributes<a class="headerlink" href="#attributes" title="Link to this heading"></a></h2>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#facilities.logger" title="facilities.logger"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logger</span></code></a></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</section>
<section id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Link to this heading"></a></h2>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#facilities.Facilities" title="facilities.Facilities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Facilities</span></code></a></p></td>
<td><p>Retrieve and manage facility location data for a given administrative area.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Link to this heading"></a></h2>
<dl class="py data">
<dt class="sig sig-object py" id="facilities.logger">
<span class="sig-prename descclassname"><span class="pre">facilities.</span></span><span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#facilities.logger" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="facilities.Facilities">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">facilities.</span></span><span class="sig-name descname"><span class="pre">Facilities</span></span><a class="headerlink" href="#facilities.Facilities" title="Link to this definition"></a></dt>
<dd><p>Retrieve and manage facility location data for a given administrative area.</p>
<p>This class provides functionality to retrieve existing facilities within a specified administrative area from
various data sources (currently supporting OpenStreetMap).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>admin_area_boundaries</strong> (<em>Polygon</em><em> or </em><em>MultiPolygon</em>) – The geographical boundaries of the administrative area for which to retrieve facilities</p></li>
<li><p><strong>data_src</strong> (<em>str</em><em>, </em><em>optional</em>) – The data source from which to retrieve facility data. Currently supported:
- “osm”: OpenStreetMap (default: <code class="docutils literal notranslate"><span class="pre">osm</span></code>)</p></li>
<li><p><strong>osm_tags</strong> (<em>dict</em><em>, </em><em>optional</em>) – Dictionary of OpenStreetMap tags to identify facilities of interest (e.g., <code class="docutils literal notranslate"><span class="pre">{'amenity':</span> <span class="pre">'hospital'}</span></code>). (default: <code class="docutils literal notranslate"><span class="pre">OSM_TAGS</span></code>)</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The default OSM_TAGS are defined in the constants module and typically target health facilities. To use
different facility types, provide custom osm_tags when creating the Facilities object.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">AdministrativeArea</span></code></dt><dd><p>Class for retrieving administrative area boundaries</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">IsopolygonCalculator</span></code></dt><dd><p>Class for calculating service areas around facilities</p>
</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pisa.administrative_area</span><span class="w"> </span><span class="kn">import</span> <span class="n">AdministrativeArea</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pisa.facilities</span><span class="w"> </span><span class="kn">import</span> <span class="n">Facilities</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Get an administrative area for a specific country and region</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">admin_area</span> <span class="o">=</span> <span class="n">AdministrativeArea</span><span class="p">(</span><span class="s2">&quot;Timor-Leste&quot;</span><span class="p">,</span> <span class="n">admin_level</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">boundaries</span> <span class="o">=</span> <span class="n">admin_area</span><span class="o">.</span><span class="n">get_admin_area_boundaries</span><span class="p">(</span><span class="s2">&quot;Baucau&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Get hospital facilities within the administrative area</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">facilities</span> <span class="o">=</span> <span class="n">Facilities</span><span class="p">(</span><span class="n">admin_area_boundaries</span><span class="o">=</span><span class="n">boundaries</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">existing_facilities</span> <span class="o">=</span> <span class="n">facilities</span><span class="o">.</span><span class="n">get_existing_facilities</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="facilities.Facilities.admin_area_boundaries">
<span class="sig-name descname"><span class="pre">admin_area_boundaries</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">shapely.Polygon</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">shapely.MultiPolygon</span></em><a class="headerlink" href="#facilities.Facilities.admin_area_boundaries" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="facilities.Facilities.data_src">
<span class="sig-name descname"><span class="pre">data_src</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'osm'</span></em><a class="headerlink" href="#facilities.Facilities.data_src" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="facilities.Facilities.osm_tags">
<span class="sig-name descname"><span class="pre">osm_tags</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span></em><a class="headerlink" href="#facilities.Facilities.osm_tags" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="facilities.Facilities.get_existing_facilities">
<span class="sig-name descname"><span class="pre">get_existing_facilities</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">pandas.DataFrame</span></span></span><a class="headerlink" href="#facilities.Facilities.get_existing_facilities" title="Link to this definition"></a></dt>
<dd><p>Retrieve existing facilities from the specified data source.</p>
<p>This method acts as a dispatcher that calls the appropriate data source-specific method based on the <cite>data_src</cite>
attribute of the Facilities instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>DataFrame containing facilities information with columns:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">osmid</span></code> (index): Facility identifier (e.g., OSM ID for OpenStreetMap data)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">longitude</span></code>: Longitude coordinate of the facility</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">latitude</span></code>: Latitude coordinate of the facility</p></li>
</ul>
</div></blockquote>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – If the specified data source is not implemented</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Currently, only the <code class="docutils literal notranslate"><span class="pre">osm</span></code> (OpenStreetMap) data source is implemented. To support additional data sources,
implement new methods and update this dispatcher method accordingly, or refactor to use an abstract base class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="facilities.Facilities.estimate_potential_facilities">
<span class="sig-name descname"><span class="pre">estimate_potential_facilities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spacing</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.05</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">geopandas.GeoDataFrame</span></span></span><a class="headerlink" href="#facilities.Facilities.estimate_potential_facilities" title="Link to this definition"></a></dt>
<dd><p>Create a grid of potential facility locations within the administrative area.</p>
<p>This method generates a regular grid of points within the administrative area boundaries that can be used as
potential locations for new facilities in optimization scenarios.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>spacing</strong> (<em>float</em>) – The distance between adjacent points in the grid, in coordinate units (degrees). Smaller values create a
denser grid with more potential facility locations.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>GeoDataFrame containing potential facility locations with columns:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ID</span></code> (index): Unique identifier for each potential facility location</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">longitude</span></code>: Longitude coordinate of the potential facility</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">latitude</span></code>: Latitude coordinate of the potential facility</p></li>
</ul>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>geopandas.GeoDataFrame</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The grid is created by:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Finding the bounding box of the administrative area</p></li>
<li><p>Creating a regular grid covering the entire bounding box</p></li>
<li><p>Clipping the grid to include only points within the actual administrative area boundaries</p></li>
</ol>
</div></blockquote>
<p>The resulting grid points are spaced at regular intervals determined by the spacing parameter.</p>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../constants/index.html" class="btn btn-neutral float-left" title="constants" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../population/index.html" class="btn btn-neutral float-right" title="population" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>